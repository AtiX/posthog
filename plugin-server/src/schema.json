{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "ClickHouseTimestamp": {
            "type": "string"
        },
        "ConsoleLogEntry": {
            "additionalProperties": false,
            "properties": {
                "instance_id": {
                    "type": ["string", "null"]
                },
                "log_level": {
                    "enum": ["info", "warn", "error"],
                    "type": "string"
                },
                "log_source": {
                    "const": "session_replay",
                    "type": "string"
                },
                "log_source_id": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                },
                "team_id": {
                    "type": "number"
                },
                "timestamp": {
                    "$ref": "#/definitions/ClickHouseTimestamp"
                }
            },
            "required": ["team_id", "message", "log_level", "log_source", "log_source_id", "instance_id", "timestamp"],
            "type": "object"
        },
        "SummarizedSessionRecordingEvent": {
            "additionalProperties": false,
            "description": "written to kafka topic: clickhouse_session_replay_events and from there to clickhouse table: session_replay_events",
            "properties": {
                "active_milliseconds": {
                    "type": "integer"
                },
                "click_count": {
                    "type": "integer"
                },
                "console_error_count": {
                    "type": "integer"
                },
                "console_log_count": {
                    "type": "integer"
                },
                "console_warn_count": {
                    "type": "integer"
                },
                "distinct_id": {
                    "type": "string"
                },
                "event_count": {
                    "type": "integer"
                },
                "first_timestamp": {
                    "type": "string"
                },
                "first_url": {
                    "type": ["string", "null"]
                },
                "keypress_count": {
                    "type": "integer"
                },
                "last_timestamp": {
                    "type": "string"
                },
                "message_count": {
                    "type": "integer"
                },
                "mouse_activity_count": {
                    "type": "integer"
                },
                "session_id": {
                    "type": "string"
                },
                "size": {
                    "type": "integer"
                },
                "team_id": {
                    "type": "number"
                },
                "uuid": {
                    "type": "string"
                }
            },
            "required": [
                "uuid",
                "first_timestamp",
                "last_timestamp",
                "team_id",
                "distinct_id",
                "session_id",
                "click_count",
                "keypress_count",
                "mouse_activity_count",
                "active_milliseconds",
                "console_log_count",
                "console_warn_count",
                "console_error_count",
                "size",
                "event_count",
                "message_count"
            ],
            "type": "object"
        }
    }
}
