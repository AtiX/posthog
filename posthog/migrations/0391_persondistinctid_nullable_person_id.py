# Generated by Django 3.2.23 on 2024-02-06 16:50

from django.db import migrations, models
from posthog.models.utils import WARN_ON_CASCADE


class Migration(migrations.Migration):
    dependencies = [
        ("posthog", "0390_personalapikey_scopes"),
    ]

    operations = [
        migrations.RunSQL(
            "ALTER TABLE posthog_persondistinctid ALTER COLUMN person_id DROP NOT NULL",
            # XXX: This reverse migration really only exists for backwards
            # compatibility within tests and local development: ``SET NOT NULL``
            # would be far too expensive to apply on this column in production,
            # (and liable to fail anyway if a ``NULL`` value has been written.)
            reverse_sql="ALTER TABLE posthog_persondistinctid ALTER COLUMN person_id SET NOT NULL",
            state_operations=[
                migrations.AlterField(
                    model_name="persondistinctid",
                    name="person",
                    field=models.ForeignKey(null=True, on_delete=WARN_ON_CASCADE, to="posthog.person"),
                ),
            ],
        )
    ]
