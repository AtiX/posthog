# Generated by Django 3.2.19 on 2023-09-18 18:28

from django.db import migrations, models


class Migration(migrations.Migration):
    atomic = False  # Cannot create index concurrently atomically

    dependencies = [
        ("posthog", "0350_add_notebook_text_content"),
    ]

    operations = [
        migrations.AddField(
            model_name="messagingrecord",
            name="campaign_count",
            field=models.IntegerField(null=True),
        ),
        migrations.AddField(
            model_name="organization",
            name="never_drop_data",
            field=models.BooleanField(blank=True, default=False, null=True),
        ),
        migrations.RunSQL(
            sql="""
            CREATE UNIQUE INDEX CONCURRENTLY idx_messagingrecord_unique_on_email_hash_campaign_key_campaign_count
            ON posthog_messagingrecord (email_hash, campaign_key, campaign_count);
            """,
            reverse_sql="""
            DROP INDEX CONCURRENTLY "idx_messagingrecord_unique_on_email_hash_campaign_key_campaign_count";
            """,
        ),
    ]
