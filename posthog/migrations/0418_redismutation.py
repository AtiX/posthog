# Generated by Django 4.2.11 on 2024-05-24 11:47

import django.contrib.postgres.fields
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [("posthog", "0417_remove_organizationmembership_only_one_owner_per_organization_and_more")]

    operations = [
        migrations.CreateModel(
            name="RedisMutation",
            fields=[
                ("id", models.BigAutoField(editable=False, primary_key=True, serialize=False)),
                ("redis_key", models.CharField(max_length=200)),
                (
                    "redis_type",
                    models.CharField(
                        choices=[
                            ("hash", "Hash"),
                            ("list", "List"),
                            ("set", "Set"),
                            ("string", "String"),
                            ("zset", "Zset"),
                        ],
                        max_length=200,
                        null=True,
                    ),
                ),
                (
                    "value",
                    models.JSONField(
                        blank=True,
                        help_text="JSON encoded mapping with value or values used in the mutation",
                        null=True,
                    ),
                ),
                (
                    "command",
                    models.CharField(
                        choices=[
                            ("append", "Append"),
                            ("del", "Del"),
                            ("expire", "Expire"),
                            ("hset", "Hset"),
                            ("lpush", "Lpush"),
                            ("lset", "Lset"),
                            ("rpush", "Rpush"),
                            ("sadd", "Sadd"),
                            ("set", "Set"),
                            ("zadd", "Zadd"),
                            ("zincrby", "Zincrby"),
                        ],
                        max_length=200,
                    ),
                ),
                ("optional_command_parameters", models.JSONField(blank=True, default=dict)),
                ("approval_threshold", models.IntegerField(default=2)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("approved", "Approved"),
                            ("applied", "Completed"),
                            ("created", "Created"),
                            ("discarded", "Discarded"),
                            ("failed", "Failed"),
                        ],
                        max_length=200,
                    ),
                ),
                (
                    "approved_by",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(), default=list, editable=False, size=None
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("last_approved_at", models.DateTimeField(editable=False, null=True)),
                ("last_updated_at", models.DateTimeField(auto_now=True)),
                ("applied_by", models.CharField(editable=False, max_length=200, null=True)),
                ("applied_at", models.DateTimeField(editable=False, null=True)),
                ("apply_error", models.TextField(editable=False, null=True)),
                ("discarded_by", models.CharField(editable=False, max_length=200, null=True)),
                ("discarded_at", models.DateTimeField(editable=False, null=True)),
            ],
        ),
    ]
