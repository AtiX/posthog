#!/bin/sh

set -e

# With posthog-js, we build array.js and array.full.js (array.js + recorder.js). If array.full.js doesn't exist, then
# just duplicate array.js as array.full.js for backwards compatibility.
# `array.full.js` files are explicitly built in posthog-js starting from v1.44.0

cp node_modules/posthog-js/dist/array.js* frontend/dist/

FILE=node_modules/posthog-js/dist/array.full.js
if [ -f "$FILE" ]; then
  cp node_modules/posthog-js/dist/array.full.js* frontend/dist/
else
  for f in frontend/dist/array.js*; do cp "$f" "$(echo "$f" | sed s/array.js/array.full.js/)"; done
fi

